#VRML_SIM R2022a utf8
# template language: javascript

PROTO RobotMemristor2 [
  field SFString   name               "robot_memristor"
  field SFVec3f    translation        0.5 0 0
  field SFRotation rotation           0 1 0 0
  field SFString   controller         "void"
  field SFInt32    arucoNumber 1
  field SFString {"simple", "complex"} complexity "simple"
  hiddenField SFFloat mass_robot         2
  hiddenField SFFloat mass_motor_wheel   0.05
  hiddenField SFFloat mass_encoder_wheel 0.05
  hiddenField SFFloat mass_arm_base      0.2
  hiddenField SFFloat mass_arm_mid1      0.15
  hiddenField SFFloat mass_arm_mid2      0.3
  hiddenField SFFloat mass_arm_gripper   0.1
  hiddenField SFFloat body_offset     0.0105
  hiddenField SFFloat arm_x 0.075
  hiddenField SFFloat arm_y 0.132
  hiddenField SFFloat arm_z 0.063
  hiddenField SFFloat robot_x_size 0.2
  hiddenField SFFloat robot_x_inner_size 0.134
  hiddenField SFFloat robot_x_edge_size 0.02
  hiddenField SFFloat robot_y_edge_size 0.065
  hiddenField SFFloat robot_y_size 0.3
  hiddenField SFFloat robot_z_size 0.335
  hiddenField SFFloat robot_height 0.013
  hiddenField SFFloat robot_plate_width 0.005
]
{
Robot {
  translation IS translation
  rotation IS rotation
  name IS name
  controller IS controller
    children [
		Transform {
			translation 0 0 %<= fields.body_offset.value >%
			children [
				Shape {
				  appearance Plastic {
					colorOverride 0.6 0.6 0.6
				  }
				  geometry Mesh {
					url ["assets/meshes/RobotMemristor2/robot_osnovno.obj"]
				  }
				}
				Shape {
				  appearance Plastic {
					colorOverride 1 0 0
				  }
				  geometry Mesh {
					url ["assets/meshes/RobotMemristor2/robot_crveno.obj"]
				  }
				}
				Shape {
				  appearance Plastic {
					colorOverride 0 0 0
				  }
				  geometry Mesh {
					url ["assets/meshes/RobotMemristor2/kapa.obj"]
				  }
				}
				Shape {
				  appearance Plastic {
					colorOverride 1 1 1
				  }
				  geometry Mesh {
					url ["assets/meshes/RobotMemristor2/sisaljke_osnovno.obj"]
				  }
				}
				DEF leva_sisaljka Connector {
				  translation 0.05425 0.12433 0.1897 
				  name "robot_left_connector"
				  type "active"
				  numberOfRotations 0
				}
				DEF desna_sisaljka Connector {
				  translation 0.05425 -0.12433 0.1897
				  name "robot_right_connector"
				  type "active"
				  numberOfRotations 0
				}
				RobotisLds01 {
				  translation -0.0262 -0.0008 0.345
				  rotation 0 0 1 -1.5708
				}
				Hand {}
				Hand {position "right"}
				Hand {shape "G"}
				Hand {shape "G" position "right"}
				Hand {shape "L" position "mid"}
				RobotArmMemristor2 {
					name "robot_arm_left"
					complexity IS complexity
				}
				RobotArmMemristor2 {
					name "robot_arm_right"
					translation 0.15 0 0
					rotation 0 0 1 3.14159
					complexity IS complexity
				}
				%< if (fields.complexity.value == "complex") { >%
					Shape {
						appearance Plastic {
							colorOverride 0 0 0
						}
						geometry Mesh {
							url ["assets/meshes/RobotMemristor2/pogon_zatezaci.obj"]
						}
					}
					Shape {
						appearance BrushedAluminium {}
						geometry Mesh {
							url ["assets/meshes/RobotMemristor2/robot_bosch.obj"]
						}
					}
					Shape {
						appearance CorrodedMetal {}
						geometry Mesh {
							url ["assets/meshes/RobotMemristor2/robot_motori.obj"]
						}
					}
					Shape {
						appearance Plastic {
							colorOverride 0 0 0.5
						}
						geometry Mesh {
							url ["assets/meshes/RobotMemristor2/robot_motori_drzaci.obj"]
						}
					}
					Shape {
						appearance Plastic {
							colorOverride 0.5 0.5 0.5
						}
						geometry Mesh {
							url ["assets/meshes/RobotMemristor2/robot_vakuum_pumpe.obj"]
						}
					}
					Shape {
						appearance Plastic {
							colorOverride 0 0 0
							metalness 1
						}
						geometry Mesh {
							url ["assets/meshes/RobotMemristor2/sisaljke_kolena.obj"]
						}
					}
					Shape {
						appearance Plastic {
							colorOverride 0 1 0
						}
						geometry Mesh {
							url ["assets/meshes/RobotMemristor2/sisaljke_baza.obj"]
						}
					}
					Shape {
						appearance Plastic {
							colorOverride 0.7 0.7 0.7
						}
						geometry Mesh {
							url ["assets/meshes/RobotMemristor2/zamenjivac_dodatno.obj"]
						}
					}
					Transform {
						translation 0.001 -0.125 0.348
						children [
							Shape {
								appearance Plastic {
									colorOverride 1 0 0
								}
								geometry Mesh {
									url ["assets/meshes/RobotMemristor2/mushroom.obj"]
								}
							}
						]
					}
					Transform {
						translation -0.0125 0.116 0.331
						children [
							Shape {
								appearance Plastic {
									colorOverride 0 1 0
								}
								geometry Mesh {
									url ["assets/meshes/RobotMemristor2/switch.obj"]
								}
							}
						]
					}
					Transform {
						translation 0.0075 0.116 0.331
						children [
							Shape {
								appearance Plastic {
									colorOverride 0 1 0
								}
								geometry Mesh {
									url ["assets/meshes/RobotMemristor2/switch.obj"]
								}
							}
						]
					}
				%< } >%
			]
		}
		Pogon {}
		OmniWheel {}
		ArucoTag {
			arucoNumber IS arucoNumber
		}
	]
  boundingObject Group {
    children [
      Transform {
        translation %<= -(fields.robot_x_size.value - 2*fields.arm_x.value + fields.robot_x_edge_size.value)/2 >% 0 %<= fields.robot_z_size.value/2 + fields.robot_height.value + fields.robot_plate_width.value/4 >%
        children [
          Box {
            size %<= fields.robot_x_inner_size.value - fields.robot_x_edge_size.value >% %<= fields.robot_y_size.value >% %<= fields.robot_z_size.value - fields.robot_plate_width.value/2 >%
          }
        ]
      }
      Transform {
        translation 0.004 0 %<= fields.robot_height.value >%
        children [
          Box {
            size %<= fields.robot_x_size.value - 0.008>% %<= fields.robot_y_size.value >% %<= fields.robot_plate_width.value >%
          }
        ]
      }
	  Transform {
        translation %<= -(fields.robot_x_size.value - 2*fields.arm_x.value - fields.robot_x_inner_size.value + fields.robot_x_edge_size.value)/2 >% %<= (fields.robot_y_size.value - fields.robot_y_edge_size.value)/2 >% %<= fields.robot_z_size.value/2 + fields.robot_height.value + fields.robot_plate_width.value/4 >%
        children [
          Box {
            size %<= fields.robot_x_edge_size.value >% %<= fields.robot_y_edge_size.value >% %<= fields.robot_z_size.value - fields.robot_plate_width.value/2 >%
          }
        ]
      }
	  Transform {
        translation %<= -(fields.robot_x_size.value - 2*fields.arm_x.value - fields.robot_x_inner_size.value + fields.robot_x_edge_size.value)/2 >% %<= -(fields.robot_y_size.value - fields.robot_y_edge_size.value)/2 >% %<= fields.robot_z_size.value/2 + fields.robot_height.value + fields.robot_plate_width.value/4 >%
        children [
          Box {
            size %<= fields.robot_x_edge_size.value >% %<= fields.robot_y_edge_size.value >% %<= fields.robot_z_size.value - fields.robot_plate_width.value/2 >%
          }
        ]
      }

    ]
  }
  physics Physics {
    density -1
    mass IS mass_robot
  }
}
}